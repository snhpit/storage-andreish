<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Puzzle</title>
    <script type="text/javascript" src="Scripts/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="Scripts/jquery.tmpl.js"></script>
    <link rel="stylesheet" href="Styles/puzzle.css" type="text/css">

    <script id="squareTemplate" type="text/x-jquery-tmpl">
        {{each indexes}}
            <div class="square">
                <span>${$index}</span>
            </div>
        {{/each}}
    </script>

    <script type="text/javascript">
        (function() {
            context = this;
            $("#compile").click(function () { context.click(); });

            //var inputData;
            //var numberOfSquares;
            var data = { indexes: [] };

            function getNumber(inputData) {
                return Math.pow(inputData, 2);
            }

            function verifyInputData(value) {
                if (isNaN(+value) && value > 1) {
                    inputData = value;
                }
            }

            function numbering(numberOfSquares) {
                var X = numberOfSquares - 1;
                for (var i = 0; i <= X; i++) {
                    data.indexes[i] = i + 1;
                }
                //data.indexes[numberOfSquares] = 0;
            }

            function compilePuzzleBox(numberOfSquares) {
                var width = $("div.square").css("width");
                $("#puzzle-box").css("width", width * numberOfSquares);
                $("#puzzle-box").css("height", width * numberOfSquares);
            }

            function click() {
                var inputData = $("#textInput").value;
                if (verifyInputData(inputData) !== NaN) {
                    numberOfSquares = getNumber(inputData);
                    numbering(numberOfSquares);
                    compilePuzzleBox(numberOfSquares);
                    $("#squareTemplate").tmpl(data).appendTo(".centerwrapper");
                }
            }
        })();

    </script>
</head>
<body>

<input type="text" id="textInput">
<input type="button" id="compile" value="new game">
<div id="puzzle-box">
    <div class="centerwrapper"></div>
</div>
<input type="button" id="reset" value="restart game"></button>

</body>
</html>
